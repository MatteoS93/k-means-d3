<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style>

	body, html {
		padding: 0;
		margin: 0;
		height: 100%;
		width: 100%;
	}

	svg {
		display: block;
	}

	svg .point {
		background-color: #444;
	}

	</style>
</head>
<body>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script type="text/javascript">

	var dataset = [];

	// Create data
	for (var i = 0; i < 1000; i++) {
		var x = Math.random()*500;
		var y = Math.random()*100;
		var g = 0;
		dataset.push([x, y, g]);
	}

	var k = 12;
	var means = [];

	for (var i = 0; i < k; i++) {
		xMean = Math.random()*500
		yMean = Math.random()*100
		means.push([xMean, yMean])
	}

	console.log(means);

	// TODO Loop this
	for (var i = 0; i < dataset.length; i++) {
		var minDist = Infinity;
		var kIndex = 0;
		for (var j = 0; j < k; j++)
		{
			var dX = dataset[i][0] - means[j][0];
			var dY = dataset[i][1] - means[j][1];
			var dist = dX*dX + dY*dY;
			if (dist < minDist) {
				kIndex = j;
				minDist = dist;
			}
		}
		dataset[i][2] = kIndex;
	}

	console.log(dataset)

	// Generate and array of k random colors
	var colors = [];
	for (var i = 0; i < k; i++)
	{
		colors.push('#'+Math.floor(Math.random()*16777215).toString(16));
	}

	//console.log(Math.max(dataset))
	var h = "100%";
	var w = "100%";

	var svg = d3
	.select("body")
	.append("svg")
	.attr("width", w)
	.attr("height", h);

	var xScale = d3
	.scale
	.linear()
	.domain([0, 500])
	.range([0, w]);

	var yScale = d3
	.scale
	.linear()
	.domain([100, 0])
	.range([0, h]);

	var colorScale = d3
	.scale
	.linear()
	.domain([0, 500])
	.range([0, 255]);

	var circles = svg
	.selectAll("circle")
	.data(dataset)
	.enter()
	.append("circle")
	.attr("class", "point");

	circles
	.attr("cx", function (d, i) {
		return xScale(d[0]);
	})
	.attr("cy", function (d, i) {
		return yScale(d[1]);
	})

	.attr("r", function (d, i) {
	    return i/100;
	})
	.attr("fill", function (d, i) {

		return colors[d[2]];
	})

</script>
</body>
</html>